<ion-header>
  <ion-toolbar color="light">
      <ion-buttons slot="start" color="dark">
        <ion-back-button
          defaultHref="/home"
          routerDirection="backward"
        ></ion-back-button>
      </ion-buttons>
      <ion-row >
      <ion-col style="text-align: left;">
        <ion-title color="primary"><span><img
          [src]=ikey
          height="60"
          style="vertical-align:middle"
        />&nbsp;&nbsp;&nbsp;&nbsp; <strong>{{event}} | {{selectedVenue | uppercase}}</strong></span></ion-title>
      </ion-col>
      <ion-col>
        <ion-row>
          <ion-col style="text-align: right;">
            <img
          [src]=logo
          height="60"
          style="vertical-align:middle"
        />
          </ion-col>
          <ion-col style="text-align: left;">
          </ion-col>
        </ion-row>
      </ion-col>
    </ion-row>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row class="small-block">
    <ion-col
      size="3"
      style="background-color: var(--ion-color-white); border: 1px solid #969da6">
      <p><ion-label class="label-1_2x">{{selectedVenue|uppercase}} OVERALL RANK</ion-label></p>
      <p><ion-label class="label-2x">{{EEIRank}} of {{VenueCount}}</ion-label></p>
    </ion-col>
    <ion-col
      size="3"
      style="background-color: var(--ion-color-white);border: 1px solid #969da6"
    >
      <p><ion-label class="label-1_2x">{{selectedVenue|uppercase}} QUALITY RANK</ion-label></p>
      <p><ion-label class="label-2x">{{QRank}} of {{VenueCount}}</ion-label></p>
    </ion-col>
    <ion-col
      size="3"
      style="background-color: var(--ion-color-white);border: 1px solid #aab2bd"
    >
      <p><ion-label class="label-1_2x">{{selectedVenue|uppercase}} PROMINENCE RANK</ion-label></p>
      <p><ion-label class="label-2x">{{PRank}} of {{VenueCount}}</ion-label></p>
    </ion-col>
    <ion-col size="3" style="background-color: var(--ion-color-white);border: 1px solid var(--ion-color-medium);">
      <p><ion-label class="label-1_2x">{{selectedVenue|uppercase}} SHARE OF EXPOSURE RANK</ion-label></p>
      <p><ion-label class="label-2x">{{SRank}} of {{VenueCount}}</ion-label></p>
    </ion-col>
    </ion-row>
  <ion-row>
    <ion-col size="2" class="col1">
      <ion-text class="section-header">KEY METRICS</ion-text>
    </ion-col>
    <ion-col size="9" class="col1" style="margin-left:2%;">
      <ion-text class="section-header">PERFORMANCE MEASURES</ion-text>
    </ion-col>
  </ion-row>
  <ion-grid>
    <ion-row class="large-block">
      <ion-col size="2" class="left-top" style="border: 1px solid var(--ion-color-medium);">
        <ion-row class="left-top-row" *ngIf="!seeRate">
          <ion-label class="label-1_2x">MEDIA VALUE EQUIVALENT MVE</ion-label>
          <ion-row justify-content-center style="margin:5%;">
            <span>
              <ion-label class="label-2x">
                {{avgIndex*totalDuration*tvrate/(10*10000000) |currency
                :'INR'}}</ion-label>
              <ion-label> crores*</ion-label>
            </span>
          </ion-row>
          <!-- <ion-row justify-content-center>
            <ion-button
              fill="outline"
              color="medium"
              size="small"
              (click)="setRate()"
              >Change TV Ad Rate</ion-button>
          </ion-row> -->
          <ion-row justify-content-center style="margin-bottom:2%" text-wrap>
            <ion-note>*TV Advt Rate: {{tvrate/100000|currency :'INR'}} lakhs per 10 sec</ion-note>
          </ion-row>
        </ion-row>
        <!-- <ion-row class="left-top-row" *ngIf="seeRate">
          <ion-label class="label-1_2x">TV Rate for 10 sec slot</ion-label>
          <ion-row justify-content-center style="margin:5%;">
            <ion-label class="label-2x">
              <ion-item>
                <ion-input [(ngModel)]="tvrate"></ion-input>
              </ion-item>
            </ion-label>
          </ion-row>
          <ion-row>
            <ion-button (click)="setRate()" fill="clear" size="small">
              <ion-icon slot="icon-only" name="arrow-round-back" color="danger">
              </ion-icon>
            </ion-button>
          </ion-row>
        </ion-row> -->
        <ion-row class="left-top-row">
          <hr />
          <ion-label class="label-1_2x">
            TOTAL EXPOSURE DURATION</ion-label>
          <ion-row justify-content-center style="margin:5%;">
            <ion-label class="label-2x">{{totalDuration|durationFormat: 's':'hhmmss'}}</ion-label>
          </ion-row>
          <ion-row justify-content-center style="margin-bottom:2%" text-wrap>
            <ion-note>hh:mm:ss</ion-note></ion-row>
          <hr />
        </ion-row>
        <ion-row class="left-top-row">
          <ion-label class="label-1_2x">EXPOSURE EFFECTIVENESS INDEX EEI</ion-label>
          <ion-row justify-content-center style="margin:5%;">
            <ion-label class="label-2x">
              {{this.avgIndex | number:'2.0-0'}}</ion-label>
          </ion-row>
          <ion-row><ion-col style="background-color:var(--ion-color-danger)">
              <ion-note color="light"> &lt; 25 LOW</ion-note>
            </ion-col>
            <ion-col style="background-color:var(--ion-color-warning)">
              <ion-note color="light"> 26-35 MEDIUM</ion-note></ion-col>
            <ion-col style="background-color:var(--ion-color-success)">
              <ion-note color="light"> &gt;36 HIGH</ion-note>
            </ion-col>
          </ion-row>
        </ion-row>
      </ion-col>
      <!-- ***************************Right Top**************-->
      <ion-col size="9" class="right-top" style="margin-left:2%;">
        <ion-row>
          <ion-col size="2" style="background-color: var(--ion-color-white);margin-right:2%;border: 1px solid var(--ion-color-medium);">
            <ion-row class="header-row">VENUE PERFORMANCE</ion-row>
            <ion-row class="right-top-row">
              <ion-label class="label-1_2x">EXPOSURE QUALITY</ion-label>
              <p>
                <ngx-gauge
                  type="full"
                  [value]="qguage"
                  max="100"
                  size="90"
                  append="%"
                  [thresholds]="{
                  '0': {color: 'red'},
                  '50': {color: 'yellow'},
                  '70': {color: 'green'}
                }"
                >
                </ngx-gauge>
              </p>
            </ion-row>
            <hr />
            <ion-row class="right-top-row">
              <ion-label class="label-1_2x">EXPOSURE PROMINENCE</ion-label>
              <p>
                <ngx-gauge
                  type="full"
                  [value]="pguage"
                  max="40"
                  size="90"
                  append="%"
                  [thresholds]="{
                  '0': {color: 'red'},
                  '8': {color: 'yellow'},
                  '15': {color: 'green'}
                }"
                ></ngx-gauge>
              </p>
            </ion-row>
            <hr />
            <ion-row class="right-top-row">
              <ion-label class="label-1_2x">SHARE OF DURATION</ion-label>
              <p>
                <ngx-gauge
                  type="full"
                  [value]="sguage"
                  max="20"
                  size="90"
                  append="%"
                  [thresholds]="{
                  '0': {color: 'red'},
                  '5': {color: 'yellow'},
                  '8': {color: 'green'}
                }"
                ></ngx-gauge>
              </p>
            </ion-row>
          </ion-col>
          <ion-col
          size="4"
          style="background-color: var(--ion-color-white); display:flex;border: 1px solid var(--ion-color-medium);"
          *ngIf="!seeAsset"
        >
          <ion-row class="header-row">ASSET EFFECTIVENESS</ion-row>
          <ion-row class="content-row"><canvas #v2Canvas></canvas></ion-row>
          <ion-row class="header-row">
            <ion-col size="4">
              <!-- <ion-button
                (click)="checktopVenue()"
                color="medium"
                fill="outline"
                size="small"
              >
                CHANGE VIEW
              </ion-button> -->
            </ion-col>
            <ion-col size="5" style="text-align: center"> </ion-col>
            <ion-col size="3">
              <ion-button
                color="medium"
                (click)="setAsset()"
                fill="clear"
                size="small"
                style="text-decoration: underline"
              >
                TABLE VIEW
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-col>
        <ion-col size= 4 *ngIf="seeAsset">
          <ion-list>
            <ion-list-header>
              <ion-row style="background-color: #f2f4f6;">
                <ion-col
                  size="4"
                  style="text-align: left; border-right: 1px solid var(--ion-color-white)"    ><ion-note color="dark">Asset</ion-note></ion-col>
                <ion-col
                  size="2"
                  style="text-align: center; border-right: 1px solid var(--ion-color-white)"
                  ><ion-note color="dark">Durn.</ion-note></ion-col>
                <ion-col
                  size="2"
                  style="text-align: center; border-right: 1px solid var(--ion-color-white)"
                  ><ion-note color="dark">E.E.I</ion-note></ion-col>
                <ion-col
                  size="3"
                  style="text-align: center; border-right: 1px solid var(--ion-color-white)"
                  ><ion-note color="dark">M.V.E (cr.)</ion-note></ion-col>
                <ion-col size="1"></ion-col>
              </ion-row>
            </ion-list-header>
            <ion-item *ngFor="let e of sortedGroup">
              <ion-row ion-no-padding>
                <ion-col size="4" style="text-align: left;">
                  <ion-text
                    color="dark"
                    style="cursor:pointer;text-decoration: underline">{{e.asset}}</ion-text>
                </ion-col>
                <ion-col size="2" style="text-align: right">
                  <ion-text color="dark">{{e.Durn | number:'1.0-0'}}s</ion-text>
                </ion-col>
                <ion-col size="2" style="text-align: center">
                  <ion-text color="dark">{{e.EEI | number:'2.0-0'}}</ion-text>
                </ion-col>
                <ion-col size="3" style="text-align: right"
                  ><ion-text color="dark">
                    {{e.MV | currency:'INR'}}</ion-text>
                </ion-col>

                <ion-col size="1" *ngIf="e.EEI>36">
                  <ion-icon name="happy" color="success"></ion-icon>
                </ion-col>
                <ion-col size="1" *ngIf="e.EEI>25 && e.EEI <=36">
                  <ion-icon name="happy" color="warning"></ion-icon>
                </ion-col>
                <ion-col size="1" *ngIf="e.EEI<25">
                  <ion-icon name="sad" color="danger"></ion-icon>
                </ion-col>
              </ion-row>
            </ion-item>
          </ion-list>
          <ion-row>
            <ion-col size="10">
              <ion-text color="medium">
                <strong>ASSET PERFORMANCE</strong></ion-text>
            </ion-col>
            <ion-col size="2">
              <ion-button
                color="tertiary"
                (click)="setAsset()"
                fill="clear"
                size="small"
                style="text-decoration: underline"
              >
                <ion-icon
                  slot="icon-only"
                  name="arrow-round-back"
                  color="danger"
                ></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-col>
          <ion-col size="5" style="background-color: var(--ion-color-white);border: 1px solid var(--ion-color-medium);" *ngIf="!seeRate">
            <ion-row class="header-row">ASSET PERFORMANCE</ion-row>
            <ion-row class="content-row"><canvas #v6Canvas></canvas></ion-row>
            <ion-row class="header-row">
              <ion-col size="3">
                <span></span>
              </ion-col>
              <ion-col size="6" style="text-align: center"> </ion-col>
              <ion-col size="3">
                <ion-button
                  style="display:flex"
                  color="medium"
                  (click)="setRate()"
                  fill="clear"
                  size="small"
                  style="text-decoration: underline"
                >
                  TABLE VIEW
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-col>
          <ion-col size=5 *ngIf="seeRate">
            <ion-list>
              <ion-list-header>
                <ion-row style="background-color: #f2f4f6;">
                  <ion-col
                    size="4"
                    style="text-align: left; border-right: 1px solid var(--ion-color-white)"
                    ><ion-note color="dark">Asset</ion-note></ion-col>
                  <ion-col
                    size="2"
                    style="text-align: center; border-right: 1px solid var(--ion-color-white)"
                    ><ion-note color="dark">Durn.</ion-note></ion-col>
                  <ion-col
                    size="2"
                    style="text-align: center; border-right: 1px solid var(--ion-color-white)"
                    ><ion-note color="dark">E.E.I</ion-note></ion-col>
                  <ion-col
                    size="3"
                    style="text-align: center; border-right: 1px solid var(--ion-color-white)"
                    ><ion-note color="dark">M.V.E (cr.)</ion-note></ion-col>
                  <ion-col size="1"></ion-col>
                </ion-row>
              </ion-list-header>
              <ion-item *ngFor="let e of grouped">
                <ion-row ion-no-padding>
                  <ion-col size="4" style="text-align: left;">
                    <ion-text
                      color="dark"
                      style="cursor:pointer;text-decoration: underline"
                      >{{e.asset}}</ion-text>
                  </ion-col>
                  <ion-col size="2" style="text-align: right"><ion-text color="dark">{{e.Durn | number:'1.0-0'}}s</ion-text></ion-col>
                  <ion-col size="2" style="text-align: center"><ion-text color="dark">{{e.EEI | number:'2.0-0'}}</ion-text></ion-col>
                  <ion-col size="3" style="text-align: right"><ion-text color="dark">{{e.mv | currency:'INR'}}</ion-text></ion-col>

                  <ion-col size="1" *ngIf="e.EEI>36">
                    <ion-icon name="happy" color="success"></ion-icon>
                  </ion-col>
                  <ion-col size="1" *ngIf="e.EEI>25 && e.EEI <=36">
                    <ion-icon name="happy" color="warning"></ion-icon>
                  </ion-col>
                  <ion-col size="1" *ngIf="e.EEI<25">
                    <ion-icon name="sad" color="danger"></ion-icon>
                  </ion-col>
                </ion-row>
              </ion-item>
            </ion-list>
            <ion-row>
              <ion-col size="10">
                <ion-text color="medium"><strong>ASSET PERFORMANCE</strong></ion-text>
                <p>
                  <ion-note>Click on asset name for venue specific information</ion-note>
                </p>
              </ion-col>
              <ion-col size="2">
                <ion-button
                  color="tertiary"
                  (click)="setRate()"
                  fill="clear"
                  size="small"
                  style="text-decoration: underline"
                >
                  <ion-icon
                    slot="icon-only"
                    name="arrow-round-back"
                    color="danger"
                  ></ion-icon>
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-col>

        </ion-row>
      </ion-col>
    </ion-row>

    <ion-row class="medium-block">
      <ion-col size="12">
        <ion-text class="section-header">BRAND INSIGHTS</ion-text>
        <ion-row justify-content-left
        style="background-color: var(--ion-color-light-shade);color:var(--ion-color-darkgrey);font-size: 1.3rem;"
        text-wrap>
          <ul>
            <li>
              {{this.selectedBrand}} received typically
              <strong> {{this.durationpermatch| number:'1.0-0'}} secs </strong
              >exposure per match at {{selectedVenue}}.
            </li>
            <li>
              Overall each match earned an average media value of
              <strong>
                {{avgIndex*durationpermatch*tvrate/(10*10000000) |currency
                :'INR'}}</strong> crores
            </li>
          </ul>
          </ion-row>
          </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
